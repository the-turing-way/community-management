name: Create Monthly CM lead Issue

on:
  schedule:
    - cron: "0 9 1 * *"  # At 09:00 UTC on the 1st of each month
  workflow_dispatch:      # Optional manual trigger

jobs:
  create_issue:
    runs-on: ubuntu-latest
    permissions:
      issues: write  # Needed to create issues with the default GITHUB_TOKEN

    steps:
      - name: CM lead Monthly Issue 
        run: |
          gh issue create \
            --repo ${{ github.repository }} \
            --title "üìÖ CM monthly lead management issue‚Äî $(date --date="+2 months" +"%B %Y")" \
            --body "This is your automatic monthly issue to manage the monthly CM tasks! üõ†Ô∏è

          Things to checkout this month:
          - [ ] Who's leading CM tasks this month? Assign yourself!  
          - [ ] Make sure that all monthly/weekly tasks in the CM project board [roadmap view] (https://github.com/orgs/the-turing-way/projects/12/views/4)  have an asignee 
          - [ ] Generally just keep an eye on the project board and the general tasks for TTW CM
          
          

          _This issue was automatically generated by GitHub Actions._" \
           
        env:
          GH_TOKEN: ${{ secrets.GITHUB_TOKEN }}
