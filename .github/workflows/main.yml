name: Create Monthly Issue

on:
  schedule:
    - cron: "0 9 1 * *"  # 09:00 UTC on the 1st of every month
  workflow_dispatch:      # Optional manual trigger for testing

jobs:
  open-monthly-issue:
    runs-on: ubuntu-latest
    steps:
      - name: Create issue
        uses: peter-evans/create-issue@v5
        with:
          token: ${{ secrets.GITHUB_TOKEN }}
          title: "📅 Monthly Planning — ${{ github.event_name == 'workflow_dispatch' && 'Manual Trigger' || format('{0} {1}', github.event.schedule.split(' ')[3], github.event.schedule.split(' ')[4])}}"
          body: |
            This is your automatic monthly issue! 🛠️

            Things to review this month:
            - [ ] Tasks from last month
            - [ ] New priorities
            - [ ] Progress tracking

            _This issue was automatically generated by GitHub Actions._
          labels: monthly, planning
